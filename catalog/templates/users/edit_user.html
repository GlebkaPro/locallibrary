{% extends "base_generic.html" %}

{% block content %}
  <div class="container">
    <div class="d-flex justify-content-center">
      <div class="card" style="width: 450px; padding: 20px">
        <div class="card-body">
          <h1>Пользователь:  {{ user.username }}</h1>

          <form method="post">
            {% csrf_token %}
            <div class="mb-3">
              <label for="{{ form.last_name.id_for_label }}">Фамилия</label>
              <input type="text" class="form-control" id="{{ form.last_name.id_for_label }}"
                     name="{{ form.last_name.name }}" value="{{ form.last_name.value }}">
            </div>

            <div class="mb-3">
              <label for="{{ form.first_name.id_for_label }}">Имя</label>
              <input type="text" class="form-control" id="{{ form.first_name.id_for_label }}"
                     name="{{ form.first_name.name }}" value="{{ form.first_name.value }}">
            </div>

            <div class="mb-3">
              <label for="{{ form.middle_name.id_for_label }}">Отчество</label>
              <input type="text" class="form-control" id="{{ form.middle_name.id_for_label }}"
                     name="{{ form.middle_name.name }}" value="{{ form.middle_name.value }}">
            </div>

            <div class="mb-3">
              <label for="{{ form.date_birth.id_for_label }}">Дата рождения</label>
              <input type="date" class="form-control" id="{{ form.date_birth.id_for_label }}"
                     name="{{ form.date_birth.name }}" value="{{ form.date_birth.value|date:"Y-m-d" }}">
            </div>

            <div class="mb-3">
              <label for="{{ form.phone_number.id_for_label }}">Мобильный телефон</label>
              <input type="text" class="form-control" id="{{ form.phone_number.id_for_label }}"
                     name="{{ form.phone_number.name }}" value="{{ form.phone_number.value }}">
            </div>


            <div class="mb-3">
              <label for="{{ form.email.id_for_label }}">Электронная почта</label>
              <input type="email" class="form-control" id="{{ form.email.id_for_label }}"
                     name="{{ form.email.name }}" value="{{ form.email.value }}">
            </div>
            
            <div class="mb-3">
              <label for="{{ form.document.id_for_label }}">Согласие на обработку персональных данных (PDF)</label>
              <input type="file" class="form-control" id="{{ form.document.id_for_label }}"
                     name="{{ form.document.name }}">
            </div>

            <div style="display: flex; gap: 8px; margin-top: 8px;">
              <button type="submit" class="btn btn-primary">Сохранить</button>
              <a href="{% url 'user_list' %}" class="btn btn-secondary">Отменить</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7-beta.19/jquery.inputmask.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#{{ form.phone_number.id_for_label }}').inputmask('+7999-999-99-99');
    });
  </script>
{% endblock %}
